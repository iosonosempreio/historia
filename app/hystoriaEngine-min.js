function myPress(){0!=finish?0==avoid&&(avoidd=1,0==setPage?checkWord(gidd("newCont")):1==setPage?checkWordd(gidd("newCont")):2==setPage&&checkWorddX(gidd("newCont")),0==iniziato?myInit():1==iniziato?checkWordLen(document.getElementById("newCont")):3==iniziato?checkWordLenn(document.getElementById("newCont")):4==iniziato&&checkWordLennX(document.getElementById("newCont")),1==check&&(renderStory(),check=0,iniziato=2,checkStoryLength(),myInit()),2==check&&(renderStory(),myPress())):(ottimo(),setTimeout('window.location.href = "hystoria_003.html"',1e4))}function myInit(){0==iniziato?(gidd("topCont").classList.remove("begin"),gidd("newCont").classList.remove("hide"),gidd("topCont").innerHTML="",gidd("newCont").innerHTML="...",gidd("baseCont").innerHTML="<h2>Inizia la storia, scrivi almeno 8 parole</h2>",iniziato=1):2==iniziato?(avoid=1,avoidd=0,gidd("topCont").classList.add("good"),gidd("newCont").classList.add("hide"),gidd("baseCont").innerHTML="",setPage=1,gidd("topCont").innerHTML="<h1>Bene!</h1><h2>Ora lascia libera la tastiera</br> per fare proseguire</br> qualcun altro!</h2>",clearContents(gidd("newCont")),gidd("newCont").setAttribute("opacity","0"),setTimeout("iniziato=3;setPage=1;avoidd=1;myInit()",4e3)):3==iniziato?(checkWordd(gidd("newCont")),avoid=0,gidd("topCont").classList.remove("good"),gidd("topCont").classList.remove("begin"),gidd("newCont").setAttribute("opacity","1"),gidd("newCont").classList.remove("hide"),gidd("newCont").focus(),gidd("topCont").innerHTML=newCont+"[...]",gidd("newCont").innerHTML="[...]",gidd("newCont").setAttribute("onfocus",""),gidd("baseCont").innerHTML="<h2>Continua la storia con almeno "+wordLenn+" parole</h2>"):4==iniziato&&(checkWorddX(gidd("newCont")),avoid=0,gidd("topCont").classList.remove("good"),gidd("topCont").classList.remove("begin"),gidd("newCont").setAttribute("opacity","1"),gidd("newCont").classList.remove("hide"),gidd("newCont").focus(),gidd("topCont").innerHTML=newCont+"...",gidd("newCont").innerHTML="[...]",gidd("newCont").setAttribute("onfocus",""),gidd("baseCont").innerHTML="<h2>Concludi la storia con almeno altre "+wordLennX+" parole</h2>")}function renderStory(){window.newCont=gidd("newCont").value,("prosegui la storia.."!=newCont||""!=newCont)&&(storia+=newCont,gidd("newCont").value="")}function clearContents(n){n.value=""}function checkWord(n){var e=n.value.split(/[\s]+/);gidd("baseCont").innerHTML=e.length>=wordLen?'<img src="img/gif.gif"/>':"<h2>Inserisci almeno 8 parole</h2>"}function checkWordd(n){1!=setDouble&&(window.wordLenn=Math.floor(10*Math.random())+6);var e=n.value.split(/[\s]+/);if(e.length>=wordLenn)gidd("baseCont").innerHTML='<img src="img/gif.gif"/>';else{var o=wordLenn-e.length;gidd("baseCont").innerHTML="<h2>Continua la storia con almeno altre "+o+" parole</h2>"}setDouble=1}function checkWorddX(n){1!=setDouble&&(window.wordLennX=Math.floor(10*Math.random())+6);var e=n.value.split(/[\s]+/);if(e.length>=wordLennX)gidd("baseCont").innerHTML='<img src="img/gif.gif"/>';else{var o=wordLennX-e.length;gidd("baseCont").innerHTML="<h2>Concludi la storia con almeno altre "+o+" parole</h2>"}setDouble=1}function checkWordLen(n){return window.len=n.value.split(/[\s]+/),len.length<wordLen?(check=0,!1):(check=1,!0)}function checkWordLenn(n){return window.lenn=n.value.split(/[\s]+/),lenn.length<wordLenn?(check=0,!1):(check=1,setDouble=0,!0)}function checkWordLennX(n){return window.lennX=n.value.split(/[\s]+/),lennX.length<wordLennX?(check=0,!1):(check=2,setDouble=0,finish=0,iniziato=5,!0)}function checkStoryLength(){setPage=1,window.n=storia.length,n>1e3&&(iniziato=4),setPage=2}function ottimo(){avoid=1,avoidd=0,gidd("topCont").classList.add("good"),gidd("newCont").classList.add("hide"),gidd("baseCont").innerHTML="",setPage=1,gidd("topCont").innerHTML="<h1>Ottimo!</h1><h2>Hai concluso la storia! Prossima storia collettiva fra 10 secondi</h2>",clearContents(gidd("newCont")),gidd("newCont").setAttribute("opacity","0")}window.gidd=function(n){return document.getElementById(n)},window.iniziato=0,window.check=0,window.setPage=0,window.setDouble=0,window.avoid=0;var storia="";window.finish=1,window.avoidd=0;var len=gidd("newCont").value.split(/[\s]+/),lenn=gidd("newCont").value.split(/[\s]+/),lennX=gidd("newCont").value.split(/[\s]+/);window.onkeypress=function(){1==avoidd&&(0==setPage?checkWord(gidd("newCont")):1==setPage?checkWordd(gidd("newCont")):2==setPage&&checkWorddX(gidd("newCont")))};var wordLen=8;